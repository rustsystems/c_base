package misc;

class Precedence {

  /*@ invariant this != null; */
  /*@ invariant this.i == 0 || this.i == 2 || this.i == 10; */
  /*@
  @ public normal_behavior // Generated by Daikon
  @ requires args != null;
  @ requires args.getClass().getName() == java.lang.String[].class.getName();
  @ requires daikon.Quant.pairwiseEqual(daikon.Quant.collectObject(args, "toString()"), new String[] {  });
  @ ensures daikon.Quant.pairwiseEqual(args, \old(args));
  @ ensures daikon.Quant.pairwiseEqual(daikon.Quant.collectObject(args, "toString()"), new String[] {  });
  @*/
  public static void main(String args[]) {
    Precedence e = new Precedence();
    e.i = 10;
    System.out.println(e.lets_calculate(4));
    // prints 6
  }

  /*@ spec_public */ int i;

  /*@
  @ private normal_behavior // Generated by Daikon
  @ requires this.i == 10;
  @ requires j == 4;
  @ ensures this.i == 2;
  @ ensures \result == 6;
  @*/
  int lets_calculate(int j)
  {
    i = i++ % j ; // this one prints 14 in the instrumented version
    //i = (i++) % j ; // this one prints 6 in the instrumented version
    return i + j;
  }

}
